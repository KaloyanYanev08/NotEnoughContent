<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Article</title>
    <script>
        function addParagraph() {
            const container = document.getElementById('paragraphs-container');
            const index = container.children.length / 2;

            const titleLabel = document.createElement('label');
            titleLabel.innerText = 'Paragraph Title:';
            const titleInput = document.createElement('input');
            titleInput.type = 'text';
            titleInput.name = `paragraphs-${index}-title`;
            titleInput.required = true;

            const bodyLabel = document.createElement('label');
            bodyLabel.innerText = 'Paragraph Body:';
            const bodyInput = document.createElement('textarea');
            bodyInput.name = `paragraphs-${index}-body`;
            bodyInput.required = true;

            container.appendChild(titleLabel);
            container.appendChild(titleInput);
            container.appendChild(document.createElement('br'));
            container.appendChild(bodyLabel);
            container.appendChild(bodyInput);
            container.appendChild(document.createElement('br'));
        }
    </script>
</head>
<body>
    <h1>Edit Article</h1>
    <form action="/edit_article/{{ article.id }}" method="post" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" value="{{ form.title.data }}" required><br><br>
        
        <label for="description">Description:</label>
        <textarea id="description" name="description" required>{{ form.description.data }}</textarea><br><br>
        
        <label for="access_id">Access:</label>
        <select id="access_id" name="access_id" required>
            {% for access_id, access_name in form.access_id.choices %}
                <option value="{{ access_id }}" {% if access_id == form.access_id.data %} selected {% endif %}>{{ access_name }}</option>
            {% endfor %}
        </select><br><br>
        
        <label for="picture_data">Picture:</label>
        <input type="file" id="picture_data" name="picture_data"><br><br>
        
        <h2>Paragraphs</h2>
            <div id="paragraphs-container">
                {% for para in form.paragraphs %}
                    <div class="paragraph">
                        <label for="{{ para.title.id }}">Paragraph Title:</label>
                        {{ para.title(class="form-control") }}
                        <label for="{{ para.body.id }}">Paragraph Body:</label>
                        {{ para.body(class="form-control", rows=5) }}
                    </div>
                {% endfor %}
            </div>

        
        <button type="submit">Save Changes</button>
    </form>
    <button type="button" onclick="addParagraph()">Add Paragraph</button>
</body>
</html>
